<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      th:replace="~{fragments/layout :: layout(~{::title}, ~{::main})}">
<head>
    <title>Team Management - SprintPilot</title>
</head>
<body>
    <main>
        <!-- Exact React Card Component -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200/80 p-6">
            <!-- Modal Overlay (hidden by default) -->
            <div id="memberModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4">
                <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg">
                    <h3 class="text-2xl font-bold mb-6 text-gray-800" id="modalTitle">Add Member</h3>
                    <form id="memberForm" class="space-y-5">
                        <!-- Name Field -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                            <input type="text" id="memberName" name="name" class="block w-full border-gray-300 rounded-lg shadow-sm p-2.5 text-sm focus:ring-primary-500 focus:border-primary-500" required />
                        </div>
                        
                        <!-- Role Field -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
                            <select id="memberRole" name="role" class="block w-full border-gray-300 rounded-lg shadow-sm p-2.5 text-sm focus:ring-primary-500 focus:border-primary-500">
                                <option value="Frontend">Frontend</option>
                                <option value="Backend" selected>Backend</option>
                                <option value="QA">QA</option>
                                <option value="DevOps">DevOps</option>
                                <option value="Designer">Designer</option>
                            </select>
                        </div>
                        
                        <!-- Daily Capacity Field -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Daily Capacity (hrs/day)</label>
                            <input type="number" id="memberCapacity" name="capacity" min="1" max="12" value="6" class="block w-full border-gray-300 rounded-lg shadow-sm p-2.5 text-sm focus:ring-primary-500 focus:border-primary-500" />
                        </div>
                        
                        <!-- Leave Days Field -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Leave Days</label>
                            <div class="flex items-center space-x-2">
                                <input type="date" id="leaveDate" class="block w-full border-gray-300 rounded-lg shadow-sm p-2.5 text-sm focus:ring-primary-500 focus:border-primary-500" />
                                <button type="button" onclick="addLeaveDay()" class="px-5 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center justify-center space-x-2 bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500">
                                    Add
                                </button>
                            </div>
                            <div id="leaveDaysContainer" class="mt-3 flex flex-wrap gap-2">
                                <!-- Leave days will be added here dynamically -->
                            </div>
                        </div>
                    </form>
                    <div class="mt-8 flex justify-end space-x-3">
                        <button onclick="closeModal()" class="px-5 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center justify-center space-x-2 bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-400">
                            Cancel
                        </button>
                        <button onclick="saveMember()" class="px-5 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center justify-center space-x-2 bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500">
                            Save
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Header Section - Exact React Match -->
            <div class="flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4">
                <h2 class="text-3xl font-bold text-gray-800">Team Configuration</h2>
                <button onclick="openAddModal()" class="px-5 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center justify-center space-x-2 bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    <span>Add Member</span>
                </button>
            </div>
            
            <!-- Team Table - Exact React Implementation -->
            <div class="overflow-x-auto">
                <table class="min-w-full bg-white text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-left py-3 px-4 font-semibold text-gray-600 uppercase tracking-wider">Name</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-600 uppercase tracking-wider">Role</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-600 uppercase tracking-wider">Capacity (hrs/day)</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-600 uppercase tracking-wider">Leave Days</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <!-- Alice Johnson -->
                        <tr>
                            <td class="py-3 px-4 font-medium text-gray-900">Alice Johnson</td>
                            <td class="py-3 px-4 text-gray-600">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    Frontend
                                </span>
                            </td>
                            <td class="py-3 px-4 text-gray-600">6</td>
                            <td class="py-3 px-4 text-gray-600">2</td>
                            <td class="py-3 px-4">
                                <div class="flex space-x-3">
                                    <button type="button" onclick="editMember('alice')" class="text-primary-600 hover:text-primary-800 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button type="button" onclick="deleteMember('alice')" class="text-danger hover:text-red-700 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- Bob Smith -->
                        <tr>
                            <td class="py-3 px-4 font-medium text-gray-900">Bob Smith</td>
                            <td class="py-3 px-4 text-gray-600">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Backend
                                </span>
                            </td>
                            <td class="py-3 px-4 text-gray-600">7</td>
                            <td class="py-3 px-4 text-gray-600">0</td>
                            <td class="py-3 px-4">
                                <div class="flex space-x-3">
                                    <button type="button" onclick="editMember('bob')" class="text-primary-600 hover:text-primary-800 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button type="button" onclick="deleteMember('bob')" class="text-danger hover:text-red-700 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- Charlie Davis -->
                        <tr>
                            <td class="py-3 px-4 font-medium text-gray-900">Charlie Davis</td>
                            <td class="py-3 px-4 text-gray-600">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    QA
                                </span>
                            </td>
                            <td class="py-3 px-4 text-gray-600">5</td>
                            <td class="py-3 px-4 text-gray-600">1</td>
                            <td class="py-3 px-4">
                                <div class="flex space-x-3">
                                    <button type="button" onclick="editMember('charlie')" class="text-primary-600 hover:text-primary-800 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button type="button" onclick="deleteMember('charlie')" class="text-danger hover:text-red-700 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- David Wilson -->
                        <tr>
                            <td class="py-3 px-4 font-medium text-gray-900">David Wilson</td>
                            <td class="py-3 px-4 text-gray-600">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Backend
                                </span>
                            </td>
                            <td class="py-3 px-4 text-gray-600">7</td>
                            <td class="py-3 px-4 text-gray-600">0</td>
                            <td class="py-3 px-4">
                                <div class="flex space-x-3">
                                    <button type="button" onclick="editMember('david')" class="text-primary-600 hover:text-primary-800 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button type="button" onclick="deleteMember('david')" class="text-danger hover:text-red-700 transition-colors">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <script>
            let currentMember = null;
            let leaveDays = [];
            
            // Modal Functions
            function openAddModal() {
                currentMember = null;
                leaveDays = [];
                document.getElementById('modalTitle').textContent = 'Add Member';
                document.getElementById('memberName').value = '';
                document.getElementById('memberRole').value = 'Backend';
                document.getElementById('memberCapacity').value = '6';
                document.getElementById('leaveDate').value = '';
                updateLeaveDaysDisplay();
                document.getElementById('memberModal').classList.remove('hidden');
            }
            
            function closeModal() {
                document.getElementById('memberModal').classList.add('hidden');
            }
            
            function editMember(memberId) {
                currentMember = memberId;
                document.getElementById('modalTitle').textContent = 'Edit Member';
                
                // Mock data for editing (in real app, this would load from server)
                const memberData = {
                    'alice': { name: 'Alice Johnson', role: 'Frontend', capacity: 6, leaveDays: ['2024-12-01', '2024-12-02'] },
                    'bob': { name: 'Bob Smith', role: 'Backend', capacity: 7, leaveDays: [] },
                    'charlie': { name: 'Charlie Davis', role: 'QA', capacity: 5, leaveDays: ['2024-11-25'] },
                    'david': { name: 'David Wilson', role: 'Backend', capacity: 7, leaveDays: [] }
                };
                
                const member = memberData[memberId];
                document.getElementById('memberName').value = member.name;
                document.getElementById('memberRole').value = member.role;
                document.getElementById('memberCapacity').value = member.capacity;
                leaveDays = [...member.leaveDays];
                updateLeaveDaysDisplay();
                
                document.getElementById('memberModal').classList.remove('hidden');
            }
            
            function deleteMember(memberId) {
                if (confirm('Are you sure you want to delete this team member?')) {
                    alert('Member deleted (mock functionality)');
                }
            }
            
            function addLeaveDay() {
                const leaveDateInput = document.getElementById('leaveDate');
                const date = leaveDateInput.value;
                
                if (date && !leaveDays.includes(date)) {
                    leaveDays.push(date);
                    leaveDays.sort();
                    leaveDateInput.value = '';
                    updateLeaveDaysDisplay();
                }
            }
            
            function removeLeaveDay(date) {
                leaveDays = leaveDays.filter(d => d !== date);
                updateLeaveDaysDisplay();
            }
            
            function updateLeaveDaysDisplay() {
                const container = document.getElementById('leaveDaysContainer');
                container.innerHTML = leaveDays.map(date => `
                    <span class="bg-primary-100 text-primary-800 text-xs font-medium px-2.5 py-1 rounded-full flex items-center">
                        ${date}
                        <button type="button" onclick="removeLeaveDay('${date}')" class="ml-2 text-red-500 hover:text-red-700 font-bold">
                            &times;
                        </button>
                    </span>
                `).join('');
            }
            
            function saveMember() {
                const name = document.getElementById('memberName').value;
                const role = document.getElementById('memberRole').value;
                const capacity = document.getElementById('memberCapacity').value;
                
                if (!name.trim()) {
                    alert('Please enter a name');
                    return;
                }
                
                // Mock save functionality
                alert(`Member ${currentMember ? 'updated' : 'added'} successfully (mock functionality)`);
                closeModal();
            }
            
            // Close modal when clicking outside
            document.getElementById('memberModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
        </script>
    </main>
</body>
</html>