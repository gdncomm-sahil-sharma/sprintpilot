<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="layout(title, content)">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title}">SprintPilot</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                DEFAULT: '#4f46e5',
                '50': '#eef2ff',
                '100': '#e0e7ff',
                '200': '#c7d2fe',
                '300': '#a5b4fc',
                '400': '#818cf8',
                '500': '#6366f1',
                '600': '#4f46e5',
                '700': '#4338ca',
                '800': '#3730a3',
                '900': '#312e81',
              },
              success: '#10b981',
              danger: '#ef4444',
              warning: '#f59e0b',
            },
          },
        },
      }
    </script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-slate-800">
    <!-- Glass-morphism Header - Exact React Match -->
    <header class="bg-white sticky top-0 z-10 border-b border-gray-200" style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(16px);">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2 cursor-pointer" onclick="window.location.href='/'">
                <span class="text-3xl">ðŸš€</span>
                <h1 class="text-2xl font-bold text-primary-800">SprintPilot</h1>
            </div>
            
            <!-- Pills Navigation - Exact React Implementation -->
            <nav class="hidden md:flex items-center space-x-2 bg-gray-100 p-1 rounded-lg">
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/">Dashboard</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/sprint/new">Sprints</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/team">Team</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/tasks">Tasks</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/analytics">Analytics</a>  
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/history">History</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/holidays">Holidays</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600"
                   href="/export">Export</a>
                <a class="px-4 py-1.5 rounded-md text-sm font-semibold transition-colors duration-200 text-gray-600 hover:bg-white hover:text-primary-600" 
                   href="/settings">Settings</a>
            </nav>
            
            <!-- Mobile Menu Button -->
            <button class="md:hidden p-2 text-gray-600 hover:text-primary-600 transition-colors" onclick="toggleMobileMenu()">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden border-t border-gray-200" style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px);">
            <div class="container mx-auto px-6 py-4 space-y-1">
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/">Dashboard</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/sprint/new">Sprints</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/team">Team</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/tasks">Tasks</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/analytics">Analytics</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/history">History</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/holidays">Holidays</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50"
                   href="/export">Export</a>
                <a class="block px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 text-gray-600 hover:text-primary-600 hover:bg-gray-50" 
                   href="/settings">Settings</a>
            </div>
        </div>
    </header>
    
    <!-- Custom JS - Load before content to ensure ApiService is available -->
    <script src="/js/app.js?v=15"></script>
    
    <!-- Main Content -->
    <main class="container mx-auto px-6 py-6">
        <div th:replace="${content}"></div>
    </main>
    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('mobile-menu');
            const button = event.target.closest('button');
            
            if (!menu.contains(event.target) && !button?.onclick?.toString().includes('toggleMobileMenu')) {
                menu.classList.add('hidden');
            }
        });
    </script>
</body>
</html>